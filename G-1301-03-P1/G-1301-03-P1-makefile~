#Makefile

# Macros
CC = gcc
CFLAGS = -02 -ansi -pedantic -Wall -Wextra

#Directories
SRC_DIR = src
SRCLIB_DIR = scrlib
INCLUDES_DIR = includes
LIB_DIR = lib
OBJ_DIR = obj

#Macros
SRC = $(SRC_DIR)/%.c
SRCLIB = $(SRCLIB_DIR)/%.c

OBJ = $(patsubst %.c,%.o, $(SRC))
OBJLIB = $(patsubst %.c,%.o, $(SRCLIB))

HEADER = $(INCLUDES_DIR)/$(patsubst %.c,%.h, $(SRC))
HEADERLIB = $(INCLUDES_DIR)/$(patsubst %.c,%.h, $(SRCLIB))
HEADEREXTRA = G-1301-03-P1-types.h


all: $(OBJ) $(OBJLIB)
	$(CC) $(CFLAGS) -o main $<

$(OBJLIB): $(SRCLIB) $(HEADERLIB) $(HEADEREXTRA)
	$(CC) $(CFLAGS) -c $(SRCLIB) -o $(OBJ_DIR)/$@

$(OBJ): $(SRC) $(HEADERLIB)
	$(CC) $(CFLAGS) -c $(SRC) -o $(OBJ_DIR)/$@
